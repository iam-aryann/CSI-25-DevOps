#!/bin/sh
# ----------------------------------------------------------------------------
# Maven Wrapper
# ----------------------------------------------------------------------------

MVNW_VERBOSE="false"
if [ "$MVNW_VERBOSE" = "true" ]; then
  set -x
fi

MVNW_REPOURL="https://repo.maven.apache.org/maven2"

WRAPPER_DIR="$(cd "$(dirname "$0")" && pwd)"
MAVEN_PROJECTBASEDIR="${MAVEN_PROJECTBASEDIR:-$WRAPPER_DIR}"

MAVEN_WRAPPER_JAR="$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.jar"
MAVEN_WRAPPER_PROPERTIES="$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.properties"

# Download wrapper if not exists
if [ ! -f "$MAVEN_WRAPPER_JAR" ]; then
  echo "Downloading Maven wrapper..."
  mkdir -p "$(dirname "$MAVEN_WRAPPER_JAR")"
  curl -fsSL "$MVNW_REPOURL/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar" -o "$MAVEN_WRAPPER_JAR"
fi

JAVA_CMD="java"
exec "$JAVA_CMD" \
  -classpath "$MAVEN_WRAPPER_JAR" \
  -Dmaven.multiModuleProjectDirectory="$MAVEN_PROJECTBASEDIR" \
  org.apache.maven.wrapper.MavenWrapperMain "$@"
